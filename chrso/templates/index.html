{% extends "layout.html" %}

{% block head %}
{{ super() }}
<link rel="stylesheet" href="http://code.jquery.com/ui/1.9.2/themes/base/jquery-ui.css" />
<script type="text/javascript">
window.chrso = window.chrso || {};
</script>
<script type="text/javascript" src="{{ url_for('.static', filename='index.js') }}"></script>
{% endblock %}

{% block title %}chr - simple url shortening{% endblock %}

{% block content %}
<!--
	Interested in hosting a chr shortener of your own?
	You can! chr is open source, under the MIT license!
	https://github.com/plausibility/chr
-->
<h1 id="chr-header">chr</h1><span id="chr-sub-heading">simple url shortening</span>

{# Form related data:
	- url: the URL we want to shorten (text)
	- custom: the custom (if any) URL to use. (text)
	- burn: should be set the URL to burn after use? (checkbox, default: false)
	- statistics: shall we enable statistics? (checkbox, default: true)
#}

<form method="POST" id="shrink-url" action="" data-chrso-submit="{{ url_for('index', json=True) }}">
{{ form.hidden_tag() }}
{{ form.url(id="url-to-shrink", class="pretty", placeholder="http://") }}
<button id="customize" class="button pretty enable-me tooltips" title="Customize URL" disabled="disabled">&#9881;</button>
<input name="shrink" type="submit" id="click-to-shrink" class="button pretty" value="Shrink!">

<div id="customize-extras">
	{{ form.custom(id="chr-text-short", class="chr-text-short pretty", maxlength="32", placeholder="Custom URL") }}
	<div id="customize-boxes">
		<label class="tooltips" title="This allows only <b>one</b> visit.">
			{{ form.burn(value="true") }}
			Burn after reading
		</label>
		<label class="tooltips" title="Do you want URL statistics?<br>Things like OS, browser, hit count, etc.">
			{{ form.statistics(value="true", checked="checked") }}	
			Enable statistics
		</label>
	</div>
</div>

{% if form.captcha %}
<div id="chr-recaptcha">
	{{ form.captcha()|safe }}
</div>
{% endif %}

</form>

{% if url %}
<div id="results">
	<div class="result">
		<input type="text" class="short" value="{{ url_for('reroute', url=url.short, _external=True) }}"/>
	</div>
</div>
{% endif %}
{% endblock %}