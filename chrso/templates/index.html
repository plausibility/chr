{% extends "layout.html" %}

{% block head %}
{{ super() }}
<link rel="stylesheet" href="http://code.jquery.com/ui/1.9.2/themes/base/jquery-ui.css" />
<script type="text/javascript" src="http://www.google.com/recaptcha/api/js/recaptcha_ajax.js"></script>
<script type="text/javascript">
window.chrso = window.chrso || {recaptcha: null};
{% if recaptcha() %}window.chrso.recaptcha = "{{ recaptcha() }}";{% endif %}
</script>
<script type="text/javascript" src="{{ url_for('.static', filename='index.js') }}"></script>
{% endblock %}

{% block title %}chr - simple url shortening{% endblock %}

{% block content %}
<!--
	Interested in hosting a chr shortener of your own?
	You can! chr is open source, under the MIT license!
	https://github.com/plausibility/chr
-->
<h1 id="chr-header">chr.so</h1>

{# Form related data: 
	- url: the URL we want to shorten (text)
	- custom: the custom (if any) URL to use. (text)
	- burn: should be set the URL to burn after use? (checkbox, default: false)
	- statistics: shall we enable statistics? (checkbox, default: true)

	- reCAPTCHA? CSRF? Who knows.
#}

<form method="POST" id="shrink-url" action="{{ url_for('submit') }}" data-chrso-submit="{{ url_for('submit', json=True) }}">
{{ form.url(id="url-to-shrink", class="pretty", placeholder="http://") }}
<button id="customize" class="button pretty enable-me tooltips" title="Customize URL" disabled="disabled">&#9881;</button>
<input name="shrink" type="submit" id="click-to-shrink" class="button pretty" value="Shrink!">

<div id="customize-extras">
	{{ form.custom(id="chr-text-short", class="chr-text-short pretty", maxlength="32", placeholder="Custom URL", value="") }}
	<div id="customize-boxes">
		<label class="tooltips" title="This allows only <b>one</b> visit.">
			{{ form.burn(value="true") }}
			Burn after reading
		</label>
		<label class="tooltips" title="Do you want URL statistics?<br>Things like OS, browser, etc.">
			{{ form.statistics(value="true", checked="checked") }}	
			Enable statistics
		</label>
	</div>
</div>

{# <!-- old recaptcha stuff - should be changed -->
<span class="tooltips" title="Testing, testing, 1, 2, 3">Hey</span>
<div id="form-modal" style="display: none;">
	<p>
		Sorry, but we require this captcha to prevent spam.<br />
		If you know a better way, send in a pull, <a href="https://github.com/plausibility/chr">@plausibility/chr</a>
	</p>
	<div id="recaptcha-goes-here"></div>
</div>
#}

</form>

<!--
<div id="results">
	<div class="result">
		<input type="text" class="short" value="http://chr.so/whatever"/>
	</div>
</div>
-->
{% endblock %}